<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Add new person</title>
        <link href="../styles/style.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    </head>
    <body>
        <div class="Unidad5">
            <h1>
                Final Project
            </h1>
        </div>

        <nav class="menu">
            <ul>
                <li><a href="../index.html">Main menu</a></li>
                <li class="barra">|</li>
                <li><a href="listInformation.html">See information</a></li>
                <li class="barra">|</li>
                <li><a href="addPerson.html">Add new person</a></li>
            </ul>
        </nav>

        <div class="addPerson">
            <h2>Form to add new person</h2>

            <form >

                <div class="contforms">
                    <di>
                        <label for="name">First name:</label><br>
                        <input type="text" id="name" name="name" value="" class="form-control"><br>
                        <label for="lastName">Last name:</label><br>
                        <input type="text" id="lastName" name="lastName" value="" class="form-control"><br>
                        <label for="age">Age:</label><br>
                        <input type="text" id="age" name="age" value="" class="form-control"><br>
                    </di>

                    <div>
                        <label for="gender">Gender:</label><br>
                        <select id="gender" name="gender" class="form-control">
                            <option value="M">Male</option>
                            <option value="F">Female</option>
                        </select><br>
                        <label for="employmentStatus">Employment status:</label><br>
                        <select id="employmentStatus" name="employmentStatus" class="form-control">
                            <option value="true">Employee</option>
                            <option value="false">Unemployed</option>
                        </select><br>
                        <label for="stratum">Stratum:</label><br>
                        <input type="text" id="stratum" name="stratum" value="" class="form-control"><br>
                    </div>

                    <div>
                        <label for="numberOfChildren">Number of children:</label><br>
                        <input type="text" id="numberOfChildren" name="numberOfChildren" value="" class="form-control"><br>
                        <label for="educationalLevel">Education level:</label><br>
                        <select id="educationalLevel" name="educationalLevel" class="form-control">
                            <option value="Primaria">Primary</option>
                            <option value="Secundaria">Secondary</option>
                            <option value="Tecnico">Technical</option>
                            <option value="Profesional">Professional</option>
                        </select><br>
                        <label for="salary">Salary:</label><br>
                        <input type="text" id="salary" name="salary" value="" class="form-control"><br><br>
                    </div>
                </div>
                <input type="submit" value="Guardar" class="btn btn-primary" onclick="add();">
            </form>

            <a href="../index.html" class="link-secondary">Volver al inicio</a>
        </div>

        <footer>
            <p>© 2023 Project unit 5 | Developed by Santiago Jiménez Escobar | santiago.jimeneze@udea.edu.co</p>
        </footer>
    </body>
</html>

<script>
    function add(){
        console.log("Adicionando");
        var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance
        xmlhttp.open( "POST", "http://localhost:8080/personatributes/", true );

        xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

        var name = document.getElementById("name");
        var lastName = document.getElementById("lastName");
        var age = document.getElementById("age");
        var gender = document.getElementById("gender");
        var employmentStatus = document.getElementById("employmentStatus");
        var stratum = document.getElementById("stratum");
        var numberOfChildren = document.getElementById("numberOfChildren");
        var educationalLevel = document.getElementById("educationalLevel");
        var salary = document.getElementById("salary");

        var newPeople = {
            "name": name.value,
            "lastName": lastName.value,
            "age": age.value,
            "gender": gender.value,
            "employmentStatus": employmentStatus.value,
            "stratum": stratum.value,
            "numberOfChildren": numberOfChildren.value,
            "educationalLevel": educationalLevel.value,
            "salary": salary.value
        }

        console.log("Datos a enviar:", newPeople);
        xmlhttp.send(JSON.stringify(newPeople));
    }
</script>